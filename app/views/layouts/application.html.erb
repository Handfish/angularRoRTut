<!DOCTYPE html>
<html>
  <head>
    <title>ZoeticLinks</title>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag    'application', media: 'all' %>
    <%= javascript_include_tag 'application' %>
  </head>

   <body ng-app="zoeticLinks">

   <!-- Body template being injected into -->
      <div class="row">
         <div class="col-md-6 col-med-offset-3">

            <!-- Render view -->
            <ui-view></ui-view>

         </div>
      </div>

   <!-- Home.html Template -->
   <script type="text/ng-template" id="/home.html">
      <!-- Page Title -->
      <div class="page-header">
         <h1>Zoetic Links</h1>
      </div>


      <!-- Displaying all posts here -->
      <div ng-repeat="post in posts | orderBy: '-upvotes'">
         <span class="glyphicon glyphicon-thumbs-up"
            ng-click="incrementUpvotes(post)"></span>
         {{post.upvotes}}

         <span style="font-size:20px; margin-left:10px;">
            <a nh-show="post.link" href="{{post.link}}">
               {{post.title}}
            </a> 
            <span ng-hide="post.link">
               {{post.title}}
            </span>
         </span>
         
         <span>
            <a href="#/posts/{{$index}}">Comments</a>
         </span>

      </div>

      <!-- Form to add create new post. -->
      <form style="margin-top:30px;"
         ng-submit="addPost()">
         <h3>Add a new post</h3>

         <div class="form-group">
            <input type="text"
               class="form-control"
               placeholder="Title" 
               ng-model="title"></input>
         </div>

         <div class="form-group">
            <input type="text" 
               class="form-control"
               placeholder="Link" 
               ng-model="link"></input>
         </div>

         <button type="submit" class="btn btn-primary">>Post</button>
      </form>
   </script>

   <!-- posts.html Template -->
   <script type="text/ng-template" id="/posts.html">
      <div class="page-header">
         <h3>
            <a ng-show="post.link" href="{{post.link}}">
               {{post.title}}
            </a>
            <span ng-hide="post.link">
               {{post.title}}
            </span>
         </h3>
      </div>

      <div ng-repeat="comment in posts.comments | orderBy: '-upvotes'">
         <span class="glyphicon glyphicon-thumbs-up"
            ng-click="incrementUpvotes(comment)"></span>
         {{comment.upvotes}} - by {{comment.author}}
         <span style="font-size:20px; margin-left:10px;">
            {{comment.body}}
         </span>
      </div>

      <form ng-submit="addComment()"
         style="margin-top:30px;">
         <h3>Add a new comment</h3>

         <div class="form-group">
            <input type="text" class="form-control" placeholder="Comment"
            ng-model="body"></input>
         </div>
         
         <button type="submit" class="btn btn-primary">Post</button>
      </form>
   </script>

   </body>
</html>
